<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jeremy Hemberger and Brian Aukema">
<meta name="dcterms.date" content="2025-07-25">

<title>Lab 2: data wrangling and plotting – Entomology 5126</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../media/web-favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-1.2.0/all.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-1.2.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../media/5126-sticker.png" alt="" class="navbar-logo">
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../syllabus.html"> 
<span class="menu-text">Syllabus</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../schedule.html"> 
<span class="menu-text">Schedule</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../content/index.qmd"> 
<span class="menu-text">Content</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../lab/index.html"> 
<span class="menu-text">Labs</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../resources.html"> 
<span class="menu-text">Resources</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../media/ent5126-syllabus_sp2026.pdf" target="_blank"> <i class="bi bi-file-pdf" role="img">
</i> 
<span class="menu-text">Course Syllabus</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jhemberger/entomology-5126" target="_blank"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:jhemberg@umn.edu"> <i class="bi bi-envelope" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#r-studio-scripts" id="toc-r-studio-scripts" class="nav-link" data-scroll-target="#r-studio-scripts">R Studio scripts</a></li>
  <li><a href="#manipulating-data" id="toc-manipulating-data" class="nav-link" data-scroll-target="#manipulating-data">Manipulating Data</a></li>
  <li><a href="#useful-commands" id="toc-useful-commands" class="nav-link" data-scroll-target="#useful-commands">Useful Commands</a>
  <ul class="collapse">
  <li><a href="#reading-data" id="toc-reading-data" class="nav-link" data-scroll-target="#reading-data">Reading data</a></li>
  <li><a href="#creating-a-list-of-numbers" id="toc-creating-a-list-of-numbers" class="nav-link" data-scroll-target="#creating-a-list-of-numbers">Creating a list of numbers</a></li>
  <li><a href="#subsetting-data" id="toc-subsetting-data" class="nav-link" data-scroll-target="#subsetting-data">Subsetting data</a></li>
  <li><a href="#creating-a-new-column" id="toc-creating-a-new-column" class="nav-link" data-scroll-target="#creating-a-new-column">Creating a new column</a></li>
  <li><a href="#deleting-an-old-column" id="toc-deleting-an-old-column" class="nav-link" data-scroll-target="#deleting-an-old-column">Deleting an old column</a></li>
  <li><a href="#selecting-elements-of-a-dataframe" id="toc-selecting-elements-of-a-dataframe" class="nav-link" data-scroll-target="#selecting-elements-of-a-dataframe">Selecting elements of a dataframe</a></li>
  <li><a href="#factors-vs.-continuous-or-discrete-variables" id="toc-factors-vs.-continuous-or-discrete-variables" class="nav-link" data-scroll-target="#factors-vs.-continuous-or-discrete-variables">Factors vs.&nbsp;continuous or discrete variables</a></li>
  <li><a href="#checking-data" id="toc-checking-data" class="nav-link" data-scroll-target="#checking-data">Checking data</a></li>
  </ul></li>
  <li><a href="#graphing-data" id="toc-graphing-data" class="nav-link" data-scroll-target="#graphing-data">Graphing data</a></li>
  <li><a href="#assignment" id="toc-assignment" class="nav-link" data-scroll-target="#assignment">Assignment</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Lab 2: data wrangling and plotting</h1>
<p class="subtitle lead">Entomology 5126 - Spring 2026</p>
</div>



<div class="quarto-title-meta column-page-left">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jeremy Hemberger and Brian Aukema </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 25, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<hr>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>Last week we entered data into R and performed a summary. Practice makes perfect - this week we will enter the data again, but do a few more steps within R to manipulate specific parts of the data.</p>
<p>You will begin to find that there are multiple ways of tackling problems within R, any of which will give you acceptable results. (For instance, last week we used the <code>read.table()</code> command. You could use <code>scan()</code> instead, with the proper arguments). In general, for these labs, I will provide helpful commands that I use. You may, however, find other commands that make more sense to you. At this stage, it might be a good idea to keep a separate Word or text file of your favourite commands - things that you know worked! It may become invaluable later on in the semester or for your thesis!</p>
</section>
<section id="r-studio-scripts" class="level1">
<h1>R Studio scripts</h1>
<p>Last week many class members used R Studio, but not everyone was familiar with R scripts. Use File/New File/R Script to launch a window that is a notepad for your R commands. Here, you can write code and save the file as a *.R file. Whenever you want to pass the command along to R, simply move to that line and hit Ctrl-Enter. A good way to annotate code in a script file is to use the # sign before any comments.</p>
</section>
<section id="manipulating-data" class="level1">
<h1>Manipulating Data</h1>
<p>It can be easiest to do data manipulation directly in Microsoft Excel. That said, older 32-bit versions of Excel could only handle 65,500 rows of data. Often, when you are working on an analysis, you will have to transform data on the fly. Doing transformations and reimportations of Excel data can get tedious. In today’s lab, we will work a little with manipulating data directly within R.</p>
</section>
<section id="useful-commands" class="level1">
<h1>Useful Commands</h1>
<section id="reading-data" class="level2">
<h2 class="anchored" data-anchor-id="reading-data">Reading data</h2>
<p>After exporting data from Excel (File/Save As… for a worksheet and choosing text format(tab delimited)) you can import it with the <code>read.table()</code> command, which we learned last week.</p>
</section>
<section id="creating-a-list-of-numbers" class="level2">
<h2 class="anchored" data-anchor-id="creating-a-list-of-numbers">Creating a list of numbers</h2>
<p>A list of numbers, which you may need to specify the rows that you’d like, for example, can be created by concatenation or the <code>c()</code> command. Recall, to stick numbers together in a “vector” (list of numbers, like a spreadsheet column), name the vector, and use the concatenate command:</p>
<pre><code>&gt; myniftyvector &lt;- c(1,2,3,4,5)</code></pre>
<p>As an aside, a short form for a sequence of numbers in a row, as above, is simply <code>1:5</code>. There are two other commands you may find useful at some point in this course: <code>seq()</code> and <code>rep()</code>. I will let you experiment with these using the help commands <code>?seq</code> and <code>?rep</code>. It may be a little strange at first, but if you read the examples at the bottom of the instructions and try one or two test cases, it becomes clear.</p>
</section>
<section id="subsetting-data" class="level2">
<h2 class="anchored" data-anchor-id="subsetting-data">Subsetting data</h2>
<p>Quite often, we want to perform an operation or analysis on only one portion of the data. R uses indexing to select variables, in a scheme like this:</p>
<pre><code>&gt; myniftydata[rowsIwant, columnsIwant]</code></pre>
<p>It’s quite simple to select various rows or columns. You can either name the the columns you want, or use the indexing position. A comma separates the row from the column arguments.<br>
<code>&gt; myniftydata[1:5,2]</code> selects the first 5 rows in the 2nd column.<br>
<code>&gt; myniftydata[-3,2]</code> selects all rows EXCEPT the 3rd, in the 2nd column.<br>
<code>&gt; myniftydata[,2:6]</code> selects all rows and columns 2 through 6.<br>
<code>&gt; myniftydata[1:5, c("year","trial")]</code> selects the first 5 rows of two columns named “year” and “trial.”<br>
A quick way to select one entire column is using a dollar sign. The dollar sign specifies which column within a dataframe, by name:<br>
<code>&gt; myniftydata$trial</code><br>
If you want the 5th observation, you could index that using brackets. If you are using the dollar sign to specify a column, the bracket index does not use a comma separator as above because you are only specifying the rows within the specific column:<br>
<code>&gt; myniftydata$trial[5]</code> picks the 5th observation in the trial column.<br>
</p>
</section>
<section id="creating-a-new-column" class="level2">
<h2 class="anchored" data-anchor-id="creating-a-new-column">Creating a new column</h2>
<p>You can create a new column in a dataframe by using the dollar sign and naming the new column. For example,<br>
<code>&gt; myniftydata$diameter &lt;- 1.9</code> creates a new column named <code>diameter</code> that is full of the values 1.9. You can put text into a new column simply by using quotations around the text value.</p>
</section>
<section id="deleting-an-old-column" class="level2">
<h2 class="anchored" data-anchor-id="deleting-an-old-column">Deleting an old column</h2>
<p>Specify the offending column as NULL:<br>
<code>&gt; myniftydata$junk &lt;- NULL</code><br>
</p>
</section>
<section id="selecting-elements-of-a-dataframe" class="level2">
<h2 class="anchored" data-anchor-id="selecting-elements-of-a-dataframe">Selecting elements of a dataframe</h2>
<p>Now, often we do not want just any rows or columns, but we want all rows that have a certain value. This can be accomplished using mathematical operators. For example,<br>
<code>&gt; myniftydata[myniftydata$trial==4,]</code> selects all of the rows in the dataframe where the trial column has a value of 4 (and all columns of those specific rows).<br>
<code>&gt; myniftydata[myniftydata$diameter &gt;= 30,]</code> selects all rows in the dataframe where the diameter is greater than or equal to 30 (and all columns of those specific rows).<br>
<code>&gt; myniftydata[(myniftydata$dbh &gt;= 30 &amp; myniftydata$trial==4),]</code> selects all rows with dbh greater than or equal to thirty in the fourth trial (and all columns of those specific rows). The ampersand &amp; is the AND argument; use a pipe <span class="math inline">\(\mid\)</span> for the OR argument.<br>
</p>
</section>
<section id="factors-vs.-continuous-or-discrete-variables" class="level2">
<h2 class="anchored" data-anchor-id="factors-vs.-continuous-or-discrete-variables">Factors vs.&nbsp;continuous or discrete variables</h2>
<p>Last class, we examined summary statistics on the data after we imported it. You may have transformed the ‘trial’ column in the rodent data set so that instead of “first” or “second” it said “1” or “2”. When you performed a summary on the data, you received summary statistics for the trial variable: a minimum, mean, maximum…. Of course, that made little sense: who cares if the mean of the trial is 1.5? It was a categorical variable, not a numerical variable. Instead of having values of “1” or “2” the trials could have (and probably should have) been named “A” and “B”.<br>
When you read in data, R makes its best guess at what type of variables you have. The <code>summary()</code> command is useful: if you have a numerical or discrete variable, you will see a numerical summary (min, max, mean, quantiles…). If you have a categorical or text variable, you will see the different values followed by a colon and the frequency with which those values appear.<br>
If you have a numeric variable (like trials 1 and 2) and you would like to convert it to a factor, use the <code>as.factor()</code> command:<br>
<code>&gt; myniftydata$trial &lt;- as.factor(myniftydata$trial)</code><br>
This command actually creates a new variable, trial, in the dataframe, and puts in the values of <code>myniftydata$trial</code> converted to a factor. Because the new variable has the same name as an existing variable, the old one is overwritten.<br>
If you ever need to turn a categorical variable into a numeric variable (rare, but it may happen…) use this command:<br>
<code>&gt; myniftydata$trial &lt;- as.numeric(as.character(myniftydata$trial))</code></p>
</section>
<section id="checking-data" class="level2">
<h2 class="anchored" data-anchor-id="checking-data">Checking data</h2>
<p>Last week, we examined the commands <code>dim()</code>, <code>nrow()</code>, and <code>summary()</code>. Remember, you can do the <code>summary()</code> command on a single column just as well as the entire dataframe!</p>
</section>
</section>
<section id="graphing-data" class="level1">
<h1>Graphing data</h1>
<p>R can be used to graph data, as well as analyze it. R’s graphing capabilities are extremely powerful, and the <code>ggplot2</code> package has become very popular over the last decade. I will not cover <code>ggplot2</code> in this class, but you may use it throughout the semester if you wish. Some people use R for publication purposes, although I usually prefer graphing software such as SigmaPlot.<br>
It helps during EDA (Exploratory Data Analysis) to graph the data and see what sorts of trends might be lurking about. Brian Joiner, the founder of Minitab statistical software, has been quoted:</p>
<blockquote class="blockquote">
<p>Regression without first plotting the data is <em>always</em> a regression!</p>
</blockquote>
<p><br>
If you have a dataset named <code>myniftydata</code>, typing<br>
<code>&gt; plot(mymyniftydata)</code> plots all of the variables in your data set against each other in a scatterplot matrix. This is a good way to spot trends between continuous variables. If you are only interested in a few variables (let’s say columns 3,4, and 5), just specify those columns, e.g., <code>plot(myniftydata[,3:5])</code>.<br>
If you are working with one or two specific variables in the dataframe,<br>
<br>
<code>&gt; plot(mydata$y</code><span class="math inline">\(\sim\)</span><code>mydata$x, main="Title", xlab="x label", ylab="y label")</code> plots an x-y plot (with a title, x label, and y label that you specify).<br>
<code>&gt; barplot(mydata$y)</code> plots a barplot. Labels can be added as above.<br>
<code>&gt; boxplot(mydata$y)</code> plots a box-and-whisker (with labels if you like).<br>
<code>&gt; hist(mydata$y)</code> plots a histogram (with labels if you like).<br>
<code>&gt; plot(density(mydata$y))</code> plots a density plot (with labels if you like).<br>
</p>
</section>
<section id="assignment" class="level1">
<h1>Assignment</h1>
<ol type="1">
<li><p>Load the Excel data named Lab2datal.xls into <code>R</code>. Like last week, separate the metadata into its own sheet. I do not need to see the metadata this time, however.</p></li>
<li><p>Perform a summary. Are any adjustments necessary?</p></li>
<li><p>Plot the data in a <em>scatterplot matrix</em>. Why do graphs corresponding to the number of insects eaten by the pitcher plants appear to have straight horizontal or vertical lines?</p></li>
<li><p>You will notice that no measurement was recorded for plant #5. Let’s pretend that you send your assistant out to the field and record a measurement of 3.496 after the fact. Replace the missing data point with this value (yes, you could do it very easily in Excel or in <code>R</code>’s data viewer, but see if you can do it from the <code>R</code> command line for the practice).</p></li>
<li><p>Convert the plant size in cm to mm.</p></li>
<li><p>Create a new column with percentage of insects eaten.</p></li>
<li><p>Please turn in</p>
<ol type="1">
<li><p>A summary of your final dataframe. (The data set, when you read it into R, is stored in what is called a - essentially a table with rows and columns).</p></li>
<li><p>A boxplot plot of the percentage variable.</p></li>
</ol></li>
</ol>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2025, Jeremy Hemberger</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Built with <a href="https://www.r-project.org/about.html" target="_blank"><i class="fa-brands fa-r-project" title="R Project" aria-label="r-project"></i></a> and <a href="https://quarto.org/" target="_blank">Quarto</a></p>
</div>
  </div>
</footer>




</body></html>